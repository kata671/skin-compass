<!doctype html>
<html lang="pl" data-lang="pl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Skin Compass â€” Twoja pielÄ™gnacja, gra, progres i planer</title>
<meta name="description" content="Analiza zdjÄ™cia (lokalnie), rekomendacje, gra doboru kosmetykÃ³w, planer rutyny, progres before/after, blog i treÅ›ci edukacyjne. Bez porad medycznych." />
<link rel="stylesheet" href="./style.css" />
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64'%3E%3Ccircle cx='32' cy='32' r='32' fill='%230b0c10'/%3E%3Ccircle cx='44' cy='20' r='14' fill='%237ee9d1'/%3E%3C/svg%3E">
</head>
<body>
<header class="topbar">
  <div class="brand"><span class="dot"></span><b>Skin Compass</b></div>
  <nav class="nav">
    <a href="#analyzer">Analiza</a>
    <a href="#recs">Rekomendacje</a>
    <a href="#game">Gra</a>
    <a href="#progress">Progres</a>
    <a href="#planner">Planer</a>
    <a href="#blog">Blog</a>
    <a href="#legal">PrywatnoÅ›Ä‡</a>
  </nav>
  <div class="actions">
    <button class="btn small" id="langToggle">PL/EN</button>
    <button class="btn primary small" id="ctaStart">Zacznij</button>
  </div>
</header>

<main class="container">
  <!-- HERO -->
  <section class="hero" id="hero">
    <h1 data-t="h1">WrzuÄ‡ zdjÄ™cie. Otrzymaj mÄ…dre rekomendacje.</h1>
    <p class="muted" data-t="heroSub">Wszystko dziaÅ‚a lokalnie â€” zdjÄ™cia zostajÄ… w Twojej przeglÄ…darce. Edukacyjnie, bez porad medycznych.</p>
    <div class="hero-cards">
      <div class="card">
        <h3>1. Analiza zdjÄ™cia</h3>
        <p class="muted">Rozpoznanie kategorii problemu (lokalnie) + dobÃ³r kosmetykÃ³w.</p>
      </div>
      <div class="card">
        <h3>2. Gra doboru</h3>
        <p class="muted">Dobierz skÅ‚adniki do celu â€” zdobywaj punkty.</p>
      </div>
      <div class="card">
        <h3>3. Plan i progres</h3>
        <p class="muted">Planer rutyny + tabela postÄ™pÃ³w i kapsuÅ‚a before/after.</p>
      </div>
    </div>
  </section>

  <!-- ANALYZER -->
  <section class="grid-2" id="analyzer">
    <div class="card">
      <h2>Analiza zdjÄ™cia (prywatnie)</h2>
      <label class="uploader">
        <input id="file" type="file" accept="image/*">
        <div>PrzeciÄ…gnij i upuÅ›Ä‡ / kliknij, aby wybraÄ‡</div>
      </label>
      <div id="preview" class="preview hide"><img id="img" alt="podglÄ…d"></div>

      <div class="card soft">
        <div class="badge">Kategoria</div>
        <div id="detected" class="mt6">â€”</div>
        <small class="muted">To nie jest porada medyczna.</small>
      </div>

      <div class="btn-row">
        <button class="btn" data-cond="tradzik">TrÄ…dzik</button>
        <button class="btn" data-cond="wagry">WÄ…gry</button>
        <button class="btn" data-cond="sucha">Sucha skÃ³ra</button>
        <button class="btn" id="clear">WyczyÅ›Ä‡</button>
      </div>
    </div>

    <div class="card" id="recs">
      <h2>Najlepsze rekomendacje</h2>
      <p class="muted" id="hint">Wybierz kategoriÄ™ lub wrzuÄ‡ zdjÄ™cie.</p>
      <div id="list" class="list"></div>

      <details class="mt12">
        <summary>Jak dobieramy?</summary>
        <ul class="muted small mt6">
          <li>SkÅ‚adniki (BHA, kwas azelainowy, ceramidy, retinoidy â€” edukacyjnie)</li>
          <li>Typ formuÅ‚y i pora (np. Å¼el na noc, krem barierowy na dzieÅ„)</li>
          <li>Oceny uÅ¼ytkowniczek (symulowane w tym demie)</li>
        </ul>
      </details>
    </div>
  </section>

  <!-- GAME -->
  <section class="card" id="game">
    <h2>Gra â€” â€Dobierz skÅ‚adnikiâ€</h2>
    <p class="muted">Cel: <b id="goalLabel">TrÄ…dzik</b>. Zaznacz 3 skÅ‚adniki. Im lepsze dopasowanie, tym wiÄ™cej punktÃ³w.</p>
    <div class="game-grid">
      <div>
        <div class="badge">SkÅ‚adniki</div>
        <div id="pool" class="chips"></div>
      </div>
      <div>
        <div class="badge">TwÃ³j wybÃ³r (max 3)</div>
        <div id="picked" class="chips"></div>
        <button class="btn primary mt12" id="scoreBtn">SprawdÅº wynik</button>
        <div id="scoreBox" class="mt12"></div>
      </div>
    </div>
  </section>

  <!-- PROGRESS -->
  <section class="card" id="progress">
    <h2>Progres â€” kapsuÅ‚a before/after</h2>
    <p class="muted">Dodawaj wpisy (zdjÄ™cie jest przechowywane tylko lokalnie jako URL â€” nic nie wysyÅ‚amy).</p>
    <form id="progressForm" class="progress-form">
      <input type="date" id="pDate" required />
      <input type="text" id="pNote" placeholder="Notatka (np. tydzieÅ„ 1 â€” BHA 2% w Å›r/pt)" />
      <input type="file" id="pImg" accept="image/*" />
      <button class="btn">Dodaj</button>
    </form>
    <div class="table">
      <div class="tr head"><div>Data</div><div>Notatka</div><div>ZdjÄ™cie</div><div></div></div>
      <div id="pRows"></div>
    </div>
  </section>

  <!-- PLANNER -->
  <section class="card" id="planner">
    <h2>Planer rutyny</h2>
    <div class="planner">
      <div class="planner-row head"><div>DzieÅ„</div><div>Rano</div><div>WieczÃ³r</div></div>
      <div id="planRows"></div>
    </div>
    <div class="mt12"><button class="btn" id="resetPlan">Resetuj planer</button></div>
  </section>

  <!-- BLOG -->
  <section class="card" id="blog">
    <h2>Edukacja i wpisy</h2>
    <div class="blog-grid" id="blogGrid"></div>
  </section>

  <!-- LEGAL -->
  <section class="card" id="legal">
    <h2>Informacje prawne</h2>
    <details open>
      <summary>OÅ›wiadczenie</summary>
      <p class="muted small mt6">Aplikacja ma charakter edukacyjny. Nie jest poradÄ… ani usÅ‚ugÄ… medycznÄ…. W sytuacjach wymagajÄ…cych diagnostyki skorzystaj z konsultacji lekarskiej.</p>
    </details>
    <details>
      <summary>Polityka prywatnoÅ›ci (skrÃ³t)</summary>
      <ul class="muted small mt6">
        <li>ZdjÄ™cia przetwarzane sÄ… wyÅ‚Ä…cznie lokalnie, nie sÄ… wysyÅ‚ane na serwer.</li>
        <li>Dane planera i progresu sÄ… zapisywane w Twojej przeglÄ…darce (localStorage).</li>
        <li>MoÅ¼esz wyczyÅ›ciÄ‡ dane w ustawieniach przeglÄ…darki.</li>
      </ul>
    </details>
    <details>
      <summary>Warunki korzystania</summary>
      <p class="muted small mt6">KorzystajÄ…c z aplikacji, akceptujesz powyÅ¼sze zasady. TreÅ›ci nie stanowiÄ… porady medycznej.</p>
    </details>
  </section>
</main>

<!-- COOKIE / CONSENT -->
<div class="consent hide" id="consent">
  <div>UÅ¼ywamy localStorage wyÅ‚Ä…cznie do zapisu Twoich ustawieÅ„ i progresu. Brak Å›ledzenia.</div>
  <div><button class="btn primary small" id="consentOk">OK</button></div>
</div>

<script>
/* ========== I18N (PL/EN minimal) ========== */
const T = {
  pl:{h1:"WrzuÄ‡ zdjÄ™cie. Otrzymaj mÄ…dre rekomendacje.", heroSub:"Wszystko dziaÅ‚a lokalnie â€” zdjÄ™cia zostajÄ… w Twojej przeglÄ…darce. Edukacyjnie, bez porad medycznych."},
  en:{h1:"Upload a photo. Get smart recommendations.", heroSub:"Everything runs locally â€” photos never leave your browser. Educational only, not medical advice."}
};
const langBtn=document.getElementById('langToggle');
langBtn.onclick=()=>{ const html=document.documentElement; html.dataset.lang=html.dataset.lang==='pl'?'en':'pl'; const L=T[html.dataset.lang]; document.querySelector('[data-t=\"h1\"]').textContent=L.h1; document.querySelector('[data-t=\"heroSub\"]').textContent=L.heroSub; };

/* ========== ANALYZER + RECS ========== */
const PRODUCTS = {
  tradzik:[
    {name:"Acne Control Gel 2%", brand:"BX Labs", rating:4.7, price:"od 39 zÅ‚", tags:["BHA","Å¼el","noc"]},
    {name:"Kwas azelainowy 10%", brand:"Dr. AZE", rating:4.6, price:"od 49 zÅ‚", tags:["azelainowy","przebarwienia"]}
  ],
  wagry:[
    {name:"Tonik BHA 2%", brand:"ClearWave", rating:4.6, price:"od 35 zÅ‚", tags:["pory","strefa-T"]}
  ],
  sucha:[
    {name:"Krem z ceramidami", brand:"BarrierLab", rating:4.8, price:"od 39 zÅ‚", tags:["bariera"]}
  ]
};
const LABELS={tradzik:"TrÄ…dzik", wagry:"WÄ…gry / zaskÃ³rniki", sucha:"Sucha skÃ³ra"};
const fileInput=document.getElementById('file');
const preview=document.getElementById('preview');
const img=document.getElementById('img');
const detected=document.getElementById('detected');
const list=document.getElementById('list');
const hint=document.getElementById('hint');
function guessByName(n){
  n=n.toLowerCase();
  if(/acne|tradzik|pimple|pryszcz/.test(n)) return "tradzik";
  if(/blackhead|wagry|comedone|pory/.test(n)) return "wagry";
  if(/dry|sucha|xerosis|flaky/.test(n)) return "sucha";
  return null;
}
function renderList(key){
  list.innerHTML="";
  if(!key){ hint.classList.remove('hide'); return; }
  hint.classList.add('hide');
  (PRODUCTS[key]||[]).forEach(p=>{
    const el=document.createElement('div');
    el.className='product';
    el.innerHTML=`<div class="dot"></div>
      <div><div><b>${p.name}</b></div>
      <div class="muted">${p.brand} â€¢ â­ ${p.rating.toFixed(1)} â€¢ ${p.price}</div>
      <div class="tags">${p.tags.map(t=>`<span class="badge">${t}</span>`).join(' ')}</div></div>`;
    list.appendChild(el);
  });
}
function setCondition(k){ detected.textContent=k?LABELS[k]:"â€”"; renderList(k); selectedGoal=k||'tradzik'; document.getElementById('goalLabel').textContent=LABELS[selectedGoal]; }
fileInput.addEventListener('change', e=>{
  const f=e.target.files?.[0]; if(!f){ preview.classList.add('hide'); setCondition(null); return; }
  const url=URL.createObjectURL(f); img.src=url; preview.classList.remove('hide'); setCondition(guessByName(f.name));
});
document.querySelectorAll('.btn[data-cond]').forEach(b=>b.onclick=()=>setCondition(b.dataset.cond));
document.getElementById('clear').onclick=()=>{ fileInput.value=""; preview.classList.add('hide'); setCondition(null); };

/* ========== GAME ========== */
const pool=document.getElementById('pool'), picked=document.getElementById('picked'), scoreBox=document.getElementById('scoreBox');
const ING=["BHA 2%","Retinoid","Niacynamid","Ceramidy","Kwas azelainowy","Wit. C","Kwas hialuronowy","Cynk","Bakuchiol","Peptydy"];
const MATCH={tradzik:["BHA 2%","Kwas azelainowy","Retinoid","Cynk","Niacynamid"], wagry:["BHA 2%","Niacynamid","Retinoid"], sucha:["Ceramidy","Kwas hialuronowy","Peptydy","Bakuchiol"]};
let selectedGoal='tradzik'; const pickedSet=new Set();
function renderChips() {
  pool.innerHTML=""; picked.innerHTML="";
  ING.forEach(x=>{
    const c=document.createElement('button'); c.className='chip'; c.textContent=x;
    c.onclick=()=>{ if(pickedSet.has(x)){ pickedSet.delete(x);} else { if(pickedSet.size<3) pickedSet.add(x); }
      drawPicked();
    };
    pool.appendChild(c);
  });
}
function drawPicked(){
  picked.innerHTML="";
  [...pickedSet].forEach(x=>{ const c=document.createElement('button'); c.className='chip active'; c.textContent=x; c.onclick=()=>{pickedSet.delete(x); drawPicked();}; picked.appendChild(c); });
}
document.getElementById('scoreBtn').onclick=()=>{
  const target=new Set(MATCH[selectedGoal]||[]);
  let s=0; pickedSet.forEach(x=>{ if(target.has(x)) s+=50; else s-=25; });
  const msg=s>=100?"Åšwietnie! ğŸ‰":"OK â€” sprÃ³buj podmieniÄ‡ skÅ‚adniki.";
  scoreBox.innerHTML=`<div class="score">Wynik: <b>${s}</b> â€¢ ${msg}</div>`;
};
renderChips();

/* ========== PROGRESS (localStorage) ========== */
const PKEY="skin-progress";
function loadP(){ try{return JSON.parse(localStorage.getItem(PKEY)||"[]");}catch{return[]} }
function saveP(v){ localStorage.setItem(PKEY, JSON.stringify(v)); }
const form=document.getElementById('progressForm'), rows=document.getElementById('pRows');
function renderP(){ rows.innerHTML=""; loadP().forEach((r,i)=>{ const el=document.createElement('div'); el.className='tr'; el.innerHTML=`<div>${r.d||""}</div><div>${r.n||""}</div><div>${r.u?`<img src="${r.u}" class="thumb">`:""}</div><div><button class="btn small" data-i="${i}">UsuÅ„</button></div>`; rows.appendChild(el); el.querySelector('button').onclick=()=>{ const all=loadP(); all.splice(i,1); saveP(all); renderP(); }; });}
form.onsubmit=(e)=>{ e.preventDefault(); const d=document.getElementById('pDate').value; const n=document.getElementById('pNote').value; const f=document.getElementById('pImg').files?.[0]; if(!d&&!n&&!f)return;
  if(f){ const u=URL.createObjectURL(f); addP({d,n,u}); } else { addP({d,n}); } form.reset(); };
function addP(obj){ const all=loadP(); all.unshift(obj); saveP(all); renderP(); } renderP();

/* ========== PLANNER (localStorage) ========== */
const DAYS=["Pon","Wt","Åšr","Czw","Pt","Sob","Nd"];
const RKEY="skin-plan";
function loadR(){ try{return JSON.parse(localStorage.getItem(RKEY)||"{}");}catch{return{}} }
function saveR(v){ localStorage.setItem(RKEY, JSON.stringify(v)); }
const planRows=document.getElementById('planRows');
function renderPlan(){
  const data=loadR(); planRows.innerHTML="";
  DAYS.forEach((d,i)=>{ const r=document.createElement('div'); r.className='planner-row';
    const am=data[i]?.am||"", pm=data[i]?.pm||"";
    r.innerHTML=`<div>${d}</div><div><input value="${am}" data-i="${i}" data-k="am" placeholder="np. SPF, tonik"/></div><div><input value="${pm}" data-i="${i}" data-k="pm" placeholder="np. retinoid, krem"/></div>`;
    planRows.appendChild(r);
  });
  planRows.querySelectorAll('input').forEach(inp=> inp.oninput=()=>{ const i=+inp.dataset.i; const k=inp.dataset.k; const data=loadR(); data[i]=data[i]||{}; data[i][k]=inp.value; saveR(data); });
}
renderPlan(); document.getElementById('resetPlan').onclick=()=>{ localStorage.removeItem(RKEY); renderPlan(); };

/* ========== BLOG (statyczne wpisy) ========== */
const BLOG=[ {t:"BHA 2% â€” kiedy i jak?", s:"Zacznij od 2â€“3x w tygodniu, unikaj Å‚Ä…czenia z retinoidem na start.", k:["BHA","peeling chemiczny"]},
             {t:"Bariera hydrolipidowa", s:"Ceramidy + cholesterole + kwasy tÅ‚uszczowe â€” szukaj w INCI: ceramide NP/NS.", k:["ceramidy","bariera"]},
             {t:"Azelainowy 10â€“15%", s:"Delikatny na przebarwienia i niedoskonaÅ‚oÅ›ci. DziaÅ‚a wolniej, ale stabilnie.", k:["azelainowy","przebarwienia"]} ];
const blogGrid=document.getElementById('blogGrid');
BLOG.forEach(p=>{ const el=document.createElement('article'); el.className='card soft'; el.innerHTML=`<h3>${p.t}</h3><p class="muted">${p.s}</p><div class="tags">${p.k.map(x=>`<span class="badge">${x}</span>`).join(' ')}</div>`; blogGrid.appendChild(el);});

/* ========== CONSENT ========== */
const consent=document.getElementById('consent'); if(!localStorage.getItem('skin-consent')) consent.classList.remove('hide');
document.getElementById('consentOk').onclick=()=>{ localStorage.setItem('skin-consent','1'); consent.classList.add('hide'); };

/* CTA */
document.getElementById('ctaStart').onclick=()=>document.getElementById('analyzer').scrollIntoView({behavior:'smooth'});

/* Smooth hash scroll fix */
document.querySelectorAll('a[href^="#"]').forEach(a=>a.onclick=(e)=>{e.preventDefault(); document.querySelector(a.getAttribute('href')).scrollIntoView({behavior:'smooth'})});
</script>
</body>
</html>
